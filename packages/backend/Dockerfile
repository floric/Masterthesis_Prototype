FROM node:slim

WORKDIR /
COPY dist .
ENV NODE_ENV="production"
ENV BACKEND_DOMAIN $BACKEND_DOMAIN
ENV FRONTEND_DOMAIN $FRONTEND_DOMAIN
ENV SESSION_SECRET $SESSION_SECRET
ENV DB_USER $DB_USER
ENV DB_PW $DB_PW
ENV PORT $BACKEND_PORT
ENV APOLLO_ENGINE_KEY $APOLLO_ENGINE_KEY
ENV DB_NAME $DB_NAME
EXPOSE 80

CMD ["node", "main.js"]
